% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Student 3000 Criminal Data},
  pdfauthor={coop711},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering

\title{Student 3000 Criminal Data}
\author{coop711}
\date{2021-02-10}

\begin{document}
\maketitle

\hypertarget{biometrika-1908}{%
\subsection{Biometrika 1908}\label{biometrika-1908}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{include_graphics}\NormalTok{(}\StringTok{"../pics/biometrika_1908.png"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=0.67\linewidth]{../pics/biometrika_1908}

\hypertarget{structure-of-data}{%
\subsection{Structure of Data}\label{structure-of-data}}

``Student'': William. S. Gosset(1876 \textasciitilde{} 1937)이 t-분포를
유도하기 위하여 모의실험에 활용한 자료는 다음과 같다.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{options}\NormalTok{(}\DataTypeTok{width =} \DecValTok{80}\NormalTok{)}
\NormalTok{crimtab}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      142.24 144.78 147.32 149.86 152.4 154.94 157.48 160.02 162.56 165.1 167.64
## 9.4       0      0      0      0     0      0      0      0      0     0      0
## 9.5       0      0      0      0     0      1      0      0      0     0      0
## 9.6       0      0      0      0     0      0      0      0      0     0      0
## 9.7       0      0      0      0     0      0      0      0      0     0      0
## 9.8       0      0      0      0     0      0      1      0      0     0      0
## 9.9       0      0      1      0     1      0      1      0      0     0      0
## 10        1      0      0      1     2      0      2      0      0     1      0
## 10.1      0      0      0      1     3      1      0      1      1     0      0
## 10.2      0      0      2      2     2      1      0      2      0     1      0
## 10.3      0      1      1      3     2      2      3      5      0     0      0
## 10.4      0      0      1      1     2      3      3      4      3     3      0
## 10.5      0      0      0      1     3      7      6      4      3     1      3
## 10.6      0      0      0      1     4      5      9     14      6     3      1
## 10.7      0      0      1      2     4      9     14     16     15     7      3
## 10.8      0      0      0      2     5      6     14     27     10     7      1
## 10.9      0      0      0      0     2      6     14     24     27    14     10
## 11        0      0      0      2     6     12     15     31     37    27     17
## 11.1      0      0      0      3     3     12     22     26     24    26     24
## 11.2      0      0      0      3     2      7     21     30     38    29     27
## 11.3      0      0      0      1     0      5     10     24     26    39     26
## 11.4      0      0      0      0     3      4      9     29     56    58     26
## 11.5      0      0      0      0     0      5     11     17     33    57     38
## 11.6      0      0      0      0     2      1      4     13     37    39     48
## 11.7      0      0      0      0     0      2      9     17     30    37     48
## 11.8      0      0      0      0     1      0      2     11     15    35     41
## 11.9      0      0      0      0     1      1      2     12     10    27     32
## 12        0      0      0      0     0      0      1      4      8    19     42
## 12.1      0      0      0      0     0      0      0      2      4    13     22
## 12.2      0      0      0      0     0      0      1      2      5     6     23
## 12.3      0      0      0      0     0      0      0      0      4     8     10
## 12.4      0      0      0      0     0      0      1      1      1     2      7
## 12.5      0      0      0      0     0      0      0      1      0     1      3
## 12.6      0      0      0      0     0      0      0      0      0     1      0
## 12.7      0      0      0      0     0      0      0      0      0     1      1
## 12.8      0      0      0      0     0      0      0      0      0     0      1
## 12.9      0      0      0      0     0      0      0      0      0     0      0
## 13        0      0      0      0     0      0      0      0      0     0      3
## 13.1      0      0      0      0     0      0      0      0      0     0      0
## 13.2      0      0      0      0     0      0      0      0      0     0      1
## 13.3      0      0      0      0     0      0      0      0      0     0      0
## 13.4      0      0      0      0     0      0      0      0      0     0      0
## 13.5      0      0      0      0     0      0      0      0      0     0      0
##      170.18 172.72 175.26 177.8 180.34 182.88 185.42 187.96 190.5 193.04 195.58
## 9.4       0      0      0     0      0      0      0      0     0      0      0
## 9.5       0      0      0     0      0      0      0      0     0      0      0
## 9.6       0      0      0     0      0      0      0      0     0      0      0
## 9.7       0      0      0     0      0      0      0      0     0      0      0
## 9.8       0      0      0     0      0      0      0      0     0      0      0
## 9.9       0      0      0     0      0      0      0      0     0      0      0
## 10        0      0      0     0      0      0      0      0     0      0      0
## 10.1      0      0      0     0      0      0      0      0     0      0      0
## 10.2      0      0      0     0      0      0      0      0     0      0      0
## 10.3      0      0      0     0      0      0      0      0     0      0      0
## 10.4      0      0      0     0      0      0      0      0     0      0      0
## 10.5      1      0      1     0      0      0      0      0     0      0      0
## 10.6      0      0      1     0      0      0      0      0     0      0      0
## 10.7      1      2      0     0      0      0      0      0     0      0      0
## 10.8      2      1      0     0      0      0      0      0     0      0      0
## 10.9      4      1      0     0      0      0      0      0     0      0      0
## 11       10      6      0     0      0      0      0      0     0      0      0
## 11.1      7      4      1     0      0      0      0      0     0      0      0
## 11.2     20      4      1     0      0      0      0      0     0      0      1
## 11.3     24      7      2     0      0      0      0      0     0      0      0
## 11.4     22     10     11     0      0      0      0      0     0      0      0
## 11.5     34     25     11     2      0      0      0      0     0      0      0
## 11.6     38     27     12     2      2      0      1      0     0      0      0
## 11.7     45     24      9     9      2      0      0      0     0      0      0
## 11.8     34     29     10     5      1      0      0      0     0      0      0
## 11.9     35     19     10     9      3      1      0      0     0      0      0
## 12       39     22     16     8      2      2      0      0     0      0      0
## 12.1     28     15     27    10      4      1      0      0     0      0      0
## 12.2     17     16     11     8      1      1      0      0     0      0      0
## 12.3     13     20     23     6      5      0      0      0     0      0      0
## 12.4     12      4      7     7      1      0      0      1     0      0      0
## 12.5     12     11      8     6      8      0      2      0     0      0      0
## 12.6      3      5      7     8      6      3      1      1     0      0      0
## 12.7      7      5      5     8      2      2      0      0     0      0      0
## 12.8      2      3      1     8      5      3      1      1     0      0      0
## 12.9      1      2      2     0      1      1      0      0     0      0      0
## 13        0      1      0     1      0      2      1      0     0      0      0
## 13.1      1      1      0     0      0      0      0      0     0      0      0
## 13.2      1      0      1     0      3      0      0      0     0      0      0
## 13.3      0      0      0     0      0      1      0      1     0      0      0
## 13.4      0      0      0     0      0      0      0      0     0      0      0
## 13.5      0      0      0     0      0      0      1      0     0      0      0
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{str}\NormalTok{(crimtab)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  'table' int [1:42, 1:22] 0 0 0 0 0 0 1 0 0 0 ...
##  - attr(*, "dimnames")=List of 2
##   ..$ : chr [1:42] "9.4" "9.5" "9.6" "9.7" ...
##   ..$ : chr [1:22] "142.24" "144.78" "147.32" "149.86" ...
\end{verbatim}

자료구조에서 살필 수 있다시피 손가락 길이와 키를 계급으로 나누고 손가락
길이와 키의 조합을 이름으로 갖는 \texttt{table}이다. 각 cell의 값은
길이와 키의 조합이 나타나는 빈도이다. 여기서 키를 인치 단위로 환원하면
어떤 모양이 드러나는지 살펴보자. cm 단위로 되어 있는 키의 계급을 인치
단위로 변환하면 숨어있던 자료구조가 드러난다. (1인치 = 2.54cm)

이러한 \texttt{table}구조의 행과 열에 이름을 붙이려면, \texttt{list}를
사용한다.\texttt{dimnames}설정 과정에서
\texttt{list(finger\ =\ ...,\ height\ =\ ...)} 같은 방법으로 이름을
부여할 경우와 그렇지 않을 때 차이가 무엇인지 알아 두자.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{crimtab_}\DecValTok{2}\NormalTok{ <-}\StringTok{ }\NormalTok{crimtab}
\KeywordTok{colnames}\NormalTok{(crimtab_}\DecValTok{2}\NormalTok{) <-}\StringTok{ }\KeywordTok{as.numeric}\NormalTok{(}\KeywordTok{colnames}\NormalTok{(crimtab_}\DecValTok{2}\NormalTok{))}\OperatorTok{/}\StringTok{ }\FloatTok{2.54}
\KeywordTok{dimnames}\NormalTok{(crimtab_}\DecValTok{2}\NormalTok{) <-}\StringTok{ }\KeywordTok{list}\NormalTok{(}\DataTypeTok{finger =} \KeywordTok{rownames}\NormalTok{(crimtab_}\DecValTok{2}\NormalTok{), }
                            \DataTypeTok{height =} \KeywordTok{colnames}\NormalTok{(crimtab_}\DecValTok{2}\NormalTok{))}
\NormalTok{crimtab_}\DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       height
## finger 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77
##   9.4   0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
##   9.5   0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
##   9.6   0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
##   9.7   0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
##   9.8   0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
##   9.9   0  0  1  0  1  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
##   10    1  0  0  1  2  0  2  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0
##   10.1  0  0  0  1  3  1  0  1  1  0  0  0  0  0  0  0  0  0  0  0  0  0
##   10.2  0  0  2  2  2  1  0  2  0  1  0  0  0  0  0  0  0  0  0  0  0  0
##   10.3  0  1  1  3  2  2  3  5  0  0  0  0  0  0  0  0  0  0  0  0  0  0
##   10.4  0  0  1  1  2  3  3  4  3  3  0  0  0  0  0  0  0  0  0  0  0  0
##   10.5  0  0  0  1  3  7  6  4  3  1  3  1  0  1  0  0  0  0  0  0  0  0
##   10.6  0  0  0  1  4  5  9 14  6  3  1  0  0  1  0  0  0  0  0  0  0  0
##   10.7  0  0  1  2  4  9 14 16 15  7  3  1  2  0  0  0  0  0  0  0  0  0
##   10.8  0  0  0  2  5  6 14 27 10  7  1  2  1  0  0  0  0  0  0  0  0  0
##   10.9  0  0  0  0  2  6 14 24 27 14 10  4  1  0  0  0  0  0  0  0  0  0
##   11    0  0  0  2  6 12 15 31 37 27 17 10  6  0  0  0  0  0  0  0  0  0
##   11.1  0  0  0  3  3 12 22 26 24 26 24  7  4  1  0  0  0  0  0  0  0  0
##   11.2  0  0  0  3  2  7 21 30 38 29 27 20  4  1  0  0  0  0  0  0  0  1
##   11.3  0  0  0  1  0  5 10 24 26 39 26 24  7  2  0  0  0  0  0  0  0  0
##   11.4  0  0  0  0  3  4  9 29 56 58 26 22 10 11  0  0  0  0  0  0  0  0
##   11.5  0  0  0  0  0  5 11 17 33 57 38 34 25 11  2  0  0  0  0  0  0  0
##   11.6  0  0  0  0  2  1  4 13 37 39 48 38 27 12  2  2  0  1  0  0  0  0
##   11.7  0  0  0  0  0  2  9 17 30 37 48 45 24  9  9  2  0  0  0  0  0  0
##   11.8  0  0  0  0  1  0  2 11 15 35 41 34 29 10  5  1  0  0  0  0  0  0
##   11.9  0  0  0  0  1  1  2 12 10 27 32 35 19 10  9  3  1  0  0  0  0  0
##   12    0  0  0  0  0  0  1  4  8 19 42 39 22 16  8  2  2  0  0  0  0  0
##   12.1  0  0  0  0  0  0  0  2  4 13 22 28 15 27 10  4  1  0  0  0  0  0
##   12.2  0  0  0  0  0  0  1  2  5  6 23 17 16 11  8  1  1  0  0  0  0  0
##   12.3  0  0  0  0  0  0  0  0  4  8 10 13 20 23  6  5  0  0  0  0  0  0
##   12.4  0  0  0  0  0  0  1  1  1  2  7 12  4  7  7  1  0  0  1  0  0  0
##   12.5  0  0  0  0  0  0  0  1  0  1  3 12 11  8  6  8  0  2  0  0  0  0
##   12.6  0  0  0  0  0  0  0  0  0  1  0  3  5  7  8  6  3  1  1  0  0  0
##   12.7  0  0  0  0  0  0  0  0  0  1  1  7  5  5  8  2  2  0  0  0  0  0
##   12.8  0  0  0  0  0  0  0  0  0  0  1  2  3  1  8  5  3  1  1  0  0  0
##   12.9  0  0  0  0  0  0  0  0  0  0  0  1  2  2  0  1  1  0  0  0  0  0
##   13    0  0  0  0  0  0  0  0  0  0  3  0  1  0  1  0  2  1  0  0  0  0
##   13.1  0  0  0  0  0  0  0  0  0  0  0  1  1  0  0  0  0  0  0  0  0  0
##   13.2  0  0  0  0  0  0  0  0  0  0  1  1  0  1  0  3  0  0  0  0  0  0
##   13.3  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  1  0  0  0
##   13.4  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
##   13.5  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{str}\NormalTok{(crimtab_}\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  'table' int [1:42, 1:22] 0 0 0 0 0 0 1 0 0 0 ...
##  - attr(*, "dimnames")=List of 2
##   ..$ finger: chr [1:42] "9.4" "9.5" "9.6" "9.7" ...
##   ..$ height: chr [1:22] "56" "57" "58" "59" ...
\end{verbatim}

\hypertarget{data-frame-uxbcc0uxd658}{%
\subsection{Data Frame 변환}\label{data-frame-uxbcc0uxd658}}

글자 속성을 갖는 손가락 길이와 키의 조합에 따른 빈도를 또 다른 변수로
갖는 \texttt{data\ frame}으로 변환하고 이를 다시 \texttt{long\ format}
으로 전환하는 과정은 다음과 같음.

\begin{itemize}
\tightlist
\item
  1차적으로 각 손가락 길이와 키의 조합을 갖는 인원수로 구성된
  \texttt{data\ frame}으로 변환하고, case 단위의
  \texttt{long\ format\ data\ frame}으로 2단계 변환.

  \begin{itemize}
  \tightlist
  \item
    \texttt{as.data.frame()} 에서 \texttt{stringsAsFactors\ =\ FALSE}가
    매우 중요한 역할을 하는 것임. 이 옵션을 설정하지 않을 경우
    \texttt{Factor}로 잡히면 \texttt{numeric}으로 전환할 수 없게 됨.
    \texttt{Factor}는 본질적으로 양의 정수로 취급됨.
  \item
    보통 이 설정은
    \texttt{stringsAsFactors\ =\ default.stringsAsFactors()}가 default
    설정으로 되어 있고, 따라서 \texttt{default.stringsAsFactors()\ =}
    FALSE 에 따라 설정을 바꿔주면 되어야 하나 써 있는 대로 되지 않는
    경우가 있어서 가능한 설정해주는 것이 안전함.
  \item
    단순히 \texttt{data.frame()}으로 변환할 경우 \texttt{Factor}로
    설정되어\texttt{numeric}으로 변환하더라도 의미없는 숫자를 얻게 됨.
  \item
    \texttt{as.data.frame()}의 결과물로 두 개의 character vector 와
    counts를 나타내는 새로운 변수 \texttt{Freq}가 나오게 됨. 손가락
    길이와 키를 나타내는 character를 numeric으로 전환하고 다음 작업
    진행.\texttt{Factor}는 본질적으로 음이 아닌 정수이기 때문임.
  \end{itemize}
\item
  \texttt{sapply}를 이용하여 두 변수의 속성을 한번에 글자(character)에서
  숫자(numeric)으로 변환함.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{crimtab_df <-}\StringTok{ }\KeywordTok{as.data.frame}\NormalTok{(crimtab_}\DecValTok{2}\NormalTok{, }
                            \DataTypeTok{stringsAsFactors =} \OtherTok{FALSE}\NormalTok{)}
\KeywordTok{str}\NormalTok{(crimtab_df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 'data.frame':    924 obs. of  3 variables:
##  $ finger: chr  "9.4" "9.5" "9.6" "9.7" ...
##  $ height: chr  "56" "56" "56" "56" ...
##  $ Freq  : int  0 0 0 0 0 0 1 0 0 0 ...
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{crimtab_df[}\DecValTok{1}\OperatorTok{:}\DecValTok{2}\NormalTok{] <-}\StringTok{ }\KeywordTok{sapply}\NormalTok{(crimtab_df[}\DecValTok{1}\OperatorTok{:}\DecValTok{2}\NormalTok{], }
                          \DataTypeTok{FUN =}\NormalTok{ as.numeric)}
\CommentTok{# crimtab_df[1:2] %<>%}
\CommentTok{#   sapply(FUN = as.numeric)}
\KeywordTok{str}\NormalTok{(crimtab_df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 'data.frame':    924 obs. of  3 variables:
##  $ finger: num  9.4 9.5 9.6 9.7 9.8 9.9 10 10.1 10.2 10.3 ...
##  $ height: num  56 56 56 56 56 56 56 56 56 56 ...
##  $ Freq  : int  0 0 0 0 0 0 1 0 0 0 ...
\end{verbatim}

손가락 길이와 키의 조합이 나타나는 빈도만큼 그 조합을 반복하는 long
format으로 변환하기 위하여 \texttt{sapply} 활용. \texttt{apply}를
사용하는 방법도 주석처리하여 보여 줌.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# crimtab_long <- apply(crimtab_df[ , 1:2], MARGIN = 2, function(x) rep(x, crimtab_df[ , 3]))}
\CommentTok{# crimtab_long <- apply(crimtab_df[, c("finger", "height")], MARGIN = 2, function(x) rep(x, crimtab_df[ , "Freq"]))}
\CommentTok{# crimtab_long <- apply(crimtab_df[c("finger", "height")], MARGIN = 2, function(x) rep(x, crimtab_df[ , "Freq"]))}
\CommentTok{# crimtab_long <- apply(crimtab_df[1:2], MARGIN = 2, function(x) rep(x, crimtab_df[ , "Freq"]))}
\NormalTok{crimtab_long <-}\StringTok{ }\KeywordTok{sapply}\NormalTok{(crimtab_df[}\KeywordTok{c}\NormalTok{(}\StringTok{"finger"}\NormalTok{, }\StringTok{"height"}\NormalTok{)], }
                       \ControlFlowTok{function}\NormalTok{(x) }\KeywordTok{rep}\NormalTok{(x, crimtab_df}\OperatorTok{$}\NormalTok{Freq))}
\CommentTok{# crimtab_long <- mapply(function(x) rep(x, crimtab_df$Freq), crimtab_df[c("finger", "height")])}
\KeywordTok{str}\NormalTok{(crimtab_long)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  num [1:3000, 1:2] 10 10.3 9.9 10.2 10.2 10.3 10.4 10.7 10 10.1 ...
##  - attr(*, "dimnames")=List of 2
##   ..$ : NULL
##   ..$ : chr [1:2] "finger" "height"
\end{verbatim}

long format 으로 변환하는 다른 방법 1

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# finger_long <- rep(crimtab_df$finger, crimtab_df$Freq)}
\CommentTok{# height_long <- rep(crimtab_df$height, crimtab_df$Freq)}
\CommentTok{# crimtab_long_df <- data.frame(finger = finger_long, height = height_long)}
\CommentTok{# str(crimtab_long_df)}
\end{Highlighting}
\end{Shaded}

long format 으로 변환하는 다른 방법 2

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# index_crimtab <- rep(1:nrow(crimtab_df), crimtab_df[, "Freq"])}
\CommentTok{# index_crimtab[1:10]}
\CommentTok{# crimtab_df_long<- crimtab_df[index_crimtab, c("finger", "height")]}
\CommentTok{# str(crimtab_df_long)}
\end{Highlighting}
\end{Shaded}

matrix 를 data frame으로 변환

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{crimtab_long_df <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(crimtab_long)}
\KeywordTok{str}\NormalTok{(crimtab_long_df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 'data.frame':    3000 obs. of  2 variables:
##  $ finger: num  10 10.3 9.9 10.2 10.2 10.3 10.4 10.7 10 10.1 ...
##  $ height: num  56 57 58 58 58 58 58 58 59 59 ...
\end{verbatim}

\hypertarget{save-for-future-works}{%
\subsubsection{Save for future works}\label{save-for-future-works}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{save.image}\NormalTok{(}\StringTok{"./crimtab.RData"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\end{document}
